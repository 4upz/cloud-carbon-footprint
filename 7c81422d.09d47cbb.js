(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{111:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=o.a.createContext({}),u=function(e){var t=o.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},s=function(e){var t=u(e.components);return o.a.createElement(p.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},m=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),s=u(n),m=r,d=s["".concat(i,".").concat(m)]||s[m]||b[m]||a;return n?o.a.createElement(d,c(c({ref:t},p),{},{components:n})):o.a.createElement(d,c({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var p=2;p<a;p++)i[p]=n[p];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},84:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return u}));var r=n(3),o=n(7),a=(n(0),n(111)),i={id:"gcp",title:"GCP"},c={unversionedId:"gcp",id:"gcp",isDocsHomePage:!1,title:"GCP",description:"Your Google Cloud Account needs to be configured to export Billing Data to BigQuery, and the application needs to authenticate with GCP to run queries on that data in BigQuery.",source:"@site/docs/GCP.md",slug:"/gcp",permalink:"/docs/gcp",version:"current",sidebar:"tryNowSidebar",previous:{title:"AWS",permalink:"/docs/aws"},next:{title:"Azure",permalink:"/docs/azure"}},l=[{value:"Options for Google Authentication",id:"options-for-google-authentication",children:[]}],p={toc:l};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Your Google Cloud Account needs to be configured to export Billing Data to BigQuery, and the application needs to authenticate with GCP to run queries on that data in BigQuery."),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Ensure you have a GCP Service Account with the permission to start BigQuery jobs and read Bigquery job results. Learn more about GCP Service Accounts ",Object(a.b)("a",{parentName:"p",href:"https://cloud.google.com/iam/docs/service-accounts"},"here."))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Create and download a JSON private file for this Service Account to your local filesystem, and make sure to set the ",Object(a.b)("inlineCode",{parentName:"p"},"GOOGLE_APPLICATION_CREDENTIALS")," environment variable. Learn more about this authentication method ",Object(a.b)("a",{parentName:"p",href:"https://cloud.google.com/docs/authentication/getting-started"},"here.")),Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"Note: make sure you use the full path for this environment variable, eg ",Object(a.b)("inlineCode",{parentName:"li"},"/Users/<user>/path/to/credential")))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Set up Google Cloud billing data to export to BigQuery. You can find the instructions for this ",Object(a.b)("a",{parentName:"p",href:"https://cloud.google.com/billing/docs/how-to/export-data-bigquery"},"here."))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Configure environmental variables for the api and client."),Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"After configuring your credentials, we need to set a number of environmental variables in the app, so it can authenticate. We use .env files to manage this. Reference ",Object(a.b)("a",{parentName:"p",href:"https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/packages/api/.env.template"},"packages/api/.env.template")," for a template .env file. Rename this file as .env, optionally remove the comments and then set the environment variables for the \u201cBilling Data'' approach. If you are only using one of these cloud providers, you can remove the environment variables associated with the other cloud provider in your ",Object(a.b)("inlineCode",{parentName:"p"},"packgages/api/.env")," file.")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"There is also a ",Object(a.b)("inlineCode",{parentName:"p"},"packages/client/.env")," file that is required to be set if the application is being deployed behind Okta. See ",Object(a.b)("a",{parentName:"p",href:"https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/packages/client/.env.template"},"client/.env.template")," for a template. Rename this file as .env, optionally remove the comments and then set the environment variables.")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"By default, the client uses AWS, GCP and Azure. If you are only using one of these cloud providers, please update the ",Object(a.b)("inlineCode",{parentName:"p"},"appConfig")," object in the ",Object(a.b)("a",{parentName:"p",href:"https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/packages/client/src/Config.ts"},"client Config file")," to only include your provider in the ",Object(a.b)("inlineCode",{parentName:"p"},"CURRENT_PROVIDERS")," array.")))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Finally, start up the application:"),Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"yarn start")))),Object(a.b)("p",null,"\u26a0\ufe0f This will incur some cost. Use this sparingly if you wish to test with live data."),Object(a.b)("p",null,"DISCLAIMER: If your editor of choice is VS Code, we recommend to use either your native or custom terminal of choice (i.e. iterm) instead. Unexpected authentication issues have occured when starting up the server in VS Code terminals."),Object(a.b)("h3",{id:"options-for-google-authentication"},"Options for Google Authentication"),Object(a.b)("p",null,"We currently only support authentication with Google via the ",Object(a.b)("inlineCode",{parentName:"p"},"GOOGLE_APPLICATION_CREDENTIALS")," environment variable."))}u.isMDXComponent=!0}}]);