<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Cloud Carbon Footprint Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Cloud Carbon Footprint Blog Atom Feed"><title data-react-helmet="true">Running the CLI | Cloud Carbon Footprint</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Running the CLI | Cloud Carbon Footprint"><meta data-react-helmet="true" name="description" content="We believe that getting your cloud emissions data should be easy. If you are looking to quickly get an output of data, the CLI is a great option. It allows you to specify exactly what data you’re looking for, including the date range, regions, groupings and output type."><meta data-react-helmet="true" property="og:description" content="We believe that getting your cloud emissions data should be easy. If you are looking to quickly get an output of data, the CLI is a great option. It allows you to specify exactly what data you’re looking for, including the date range, regions, groupings and output type."><meta data-react-helmet="true" property="og:url" content="https://ThoughtWorks-Cleantech.github.io/docs/running-the-cli"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ThoughtWorks-Cleantech.github.io/docs/running-the-cli"><link rel="stylesheet" href="/styles.6b48eb87.css">
<link rel="preload" href="/styles.3c6e7ce7.js" as="script">
<link rel="preload" href="/runtime~main.446322e8.js" as="script">
<link rel="preload" href="/main.754d6ca9.js" as="script">
<link rel="preload" href="/1.ce7604a1.js" as="script">
<link rel="preload" href="/2.d48d6d6c.js" as="script">
<link rel="preload" href="/01a85c17.2efc03ee.js" as="script">
<link rel="preload" href="/1be78505.9cbc90d0.js" as="script">
<link rel="preload" href="/6875c492.b802c5ea.js" as="script">
<link rel="preload" href="/a6aa9e1f.3e9d1bef.js" as="script">
<link rel="preload" href="/c4f5d8e4.e5542043.js" as="script">
<link rel="preload" href="/ccc49370.f94f8b81.js" as="script">
<link rel="preload" href="/38.0ce2fa73.js" as="script">
<link rel="preload" href="/37.923ab7ae.js" as="script">
<link rel="preload" href="/935f2afb.a438e0ae.js" as="script">
<link rel="preload" href="/17896441.ea061816.js" as="script">
<link rel="preload" href="/f4c9c80c.85537b12.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Cloud Carbon Footprint</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link" href="/docs/getting-started">Try Now</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Cloud Carbon Footprint</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link" href="/docs/getting-started">Try Now</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Get Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started">Try Now</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Running Locally</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Running the Web App</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/run-with-mocked-data">Run with Mocked Data</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Connect to Real Data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/aws">AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gcp">GCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/azure">Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/alternative-data-approaches">Alternative Data Approaches</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/run-with-docker">Run with Docker</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/running-the-cli">Running the CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/performance-configuration">Performance Configuration</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Running the CLI</h1></header><div class="markdown"><p>We believe that getting your cloud emissions data should be easy. If you are looking to quickly get an output of data, the CLI is a great option. It allows you to specify exactly what data you’re looking for, including the date range, regions, groupings and output type.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="local"></a>Local<a class="hash-link" href="#local" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">yarn start-cli &lt;options&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="cli-options"></a>CLI Options<a class="hash-link" href="#cli-options" title="Direct link to heading">#</a></h4><p>You can run the tool interactively with the <code>-i</code> flag; CLI will ask for the options/parameters</p><p>Or you can choose to pass the parameters in a single line:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">--startDate YYYY-MM-DD \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--endDate YYYY-MM-DD \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--region [us-east-1 | us-east-2] \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--groupBy [day | dayAndService | service] \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--format [table | csv]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="serve-the-documentation"></a>Serve the documentation<a class="hash-link" href="#serve-the-documentation" title="Direct link to heading">#</a></h3><p>From the root directory, run the command from the terminal</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">yarn docs</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This will serve the docs and give an url where you can visit and see the documentation</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="options-for-cloud-emission-estimation"></a>Options for cloud emission estimation<a class="hash-link" href="#options-for-cloud-emission-estimation" title="Direct link to heading">#</a></h3><p>We support two approaches to gathering usage data for different cloud providers. One approach gives a more holistic understanding of your emissions whereas the other prioritizes accuracy:</p><ol><li><p><strong>Using Billing Data (Holistic) -</strong> By default, we query AWS Cost and Usage Reports with Amazon Athena, and GCP Billing Export Table using BigQuery. This pulls usage data from all Linked Accounts in your AWS or GCP Organization. This option is selected by setting <code>AWS_USE_BILLING_DATA</code> (AWS) and/or <code>GCP_USE_BILLING_DATA</code> (GCP) to true in the server .env file. You need to also set additional environment variables as specified in <a href="https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/api/.env.template" target="_blank" rel="noopener noreferrer">api/.env.template</a> You can see the permissions required by this approach in ccf-athena.yaml file. This approach provides us with a more holistic estimation of your cloud energy and carbon consumption, but it is less accurate as we use a constant (rather than measure) CPU Utilization, set in <a href="https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/packages/core/src/domain/FootprintEstimationConstants.ts" target="_blank" rel="noopener noreferrer">packages/core/src/domain/FootprintEstimationConstants.ts</a>. This is the only approach currently supported for Microsoft Azure.</p></li><li><p><strong>Using Cloud Usage APIs (Higher Accuracy) -</strong> This approach utilizes the AWS CloudWatch and Cost Explore APIs, and the GCP Cloud Monitoring API. We achieve this by looping through the accounts (the list is in the <a href="https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/%5Bapi/.env%5D" target="_blank" rel="noopener noreferrer">api/.env</a> file) and then making the API calls on each account for the regions and services set in <a href="https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/packages/core/src/application/Config.ts" target="_blank" rel="noopener noreferrer">packages/core/src/application/Config.ts</a>. The permissions required for this approach are in the <a href="https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/ccf.yaml" target="_blank" rel="noopener noreferrer">ccf.yaml</a> file. This approach is more accurate as we use the actual CPU usage in the emission estimation but is confined to the services that have been implemented so far in the application. This option is not currently supported for Microsoft Azure.</p></li></ol><p>For a more comprehensive read on the various calculations and constants that we use for the emissions estimates, check out the <a href="https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/METHODOLOGY.md" target="_blank" rel="noopener noreferrer">Methodology page</a></p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/run-with-docker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Run with Docker</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/performance-configuration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Performance Configuration »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#serve-the-documentation" class="table-of-contents__link">Serve the documentation</a></li><li><a href="#options-for-cloud-emission-estimation" class="table-of-contents__link">Options for cloud emission estimation</a></li></ul></div></div></div></div></main></div></div><div><div class="footerImageContainer_2H1A"><div><p class="footerImageTitle_1-0Q">Have a Question?</p><a href="https://groups.google.com/g/cloud-carbon-footprint" target="_blank" rel="noopener noreferrer"><button class="MuiButtonBase-root MuiButton-root jss2 MuiButton-contained" tabindex="0" type="button"><span class="MuiButton-label">JOIN OUR DISCUSSION FORUM</span></button></a></div></div><div class="footerLicenseContainer_dmmY"><p>Cloud Carbon Footprint is an open-source project, sponsored by ThoughtWorks Inc. under the <a class="footerLicenseLink_jTO1" target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a></p><p><a class="footerLicenseLink_jTO1" target="_blank" href="https://www.thoughtworks.com/privacy-policy">PRIVACY POLICY</a></p></div></div></div>
<script src="/styles.3c6e7ce7.js"></script>
<script src="/runtime~main.446322e8.js"></script>
<script src="/main.754d6ca9.js"></script>
<script src="/1.ce7604a1.js"></script>
<script src="/2.d48d6d6c.js"></script>
<script src="/01a85c17.2efc03ee.js"></script>
<script src="/1be78505.9cbc90d0.js"></script>
<script src="/6875c492.b802c5ea.js"></script>
<script src="/a6aa9e1f.3e9d1bef.js"></script>
<script src="/c4f5d8e4.e5542043.js"></script>
<script src="/ccc49370.f94f8b81.js"></script>
<script src="/38.0ce2fa73.js"></script>
<script src="/37.923ab7ae.js"></script>
<script src="/935f2afb.a438e0ae.js"></script>
<script src="/17896441.ea061816.js"></script>
<script src="/f4c9c80c.85537b12.js"></script>
</body>
</html>