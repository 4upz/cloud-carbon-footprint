(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{110:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return l}));var o=n(3),r=n(7),a=(n(0),n(116)),i={id:"running-the-cli",title:"Running the CLI"},c={unversionedId:"running-the-cli",id:"running-the-cli",isDocsHomePage:!1,title:"Running the CLI",description:"We believe that getting your cloud emissions data should be easy. If you are looking to quickly get an output of data, the CLI is a great option. It allows you to specify exactly what data you\u2019re looking for, including the date range, regions, groupings and output type.",source:"@site/docs/RunningTheCli.md",slug:"/running-the-cli",permalink:"/docs/running-the-cli",version:"current",sidebar:"tryNowSidebar",previous:{title:"Run with Docker",permalink:"/docs/run-with-docker"},next:{title:"Performance Configurations",permalink:"/docs/performance-configurations"}},s=[{value:"Serve the documentation",id:"serve-the-documentation",children:[]},{value:"Options for cloud emission estimation",id:"options-for-cloud-emission-estimation",children:[]}],u={toc:s};function l(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"We believe that getting your cloud emissions data should be easy. If you are looking to quickly get an output of data, the CLI is a great option. It allows you to specify exactly what data you\u2019re looking for, including the date range, regions, groupings and output type."),Object(a.b)("h4",{id:"local"},"Local"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"yarn start-cli <options>\n")),Object(a.b)("h4",{id:"cli-options"},"CLI Options"),Object(a.b)("p",null,"You can run the tool interactively with the ",Object(a.b)("inlineCode",{parentName:"p"},"-i")," flag; CLI will ask for the options/parameters"),Object(a.b)("p",null,"Or you can choose to pass the parameters in a single line:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"--startDate YYYY-MM-DD \\\n--endDate YYYY-MM-DD \\\n--region [us-east-1 | us-east-2] \\\n--groupBy [day | dayAndService | service] \\\n--format [table | csv]\n")),Object(a.b)("h3",{id:"serve-the-documentation"},"Serve the documentation"),Object(a.b)("p",null,"From the root directory, run the command from the terminal"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"yarn docs\n")),Object(a.b)("p",null,"This will serve the docs and give an url where you can visit and see the documentation"),Object(a.b)("h3",{id:"options-for-cloud-emission-estimation"},"Options for cloud emission estimation"),Object(a.b)("p",null,"We support two approaches to gathering usage data for different cloud providers. One approach gives a more holistic understanding of your emissions whereas the other prioritizes accuracy:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},Object(a.b)("strong",{parentName:"p"},"Using Billing Data (Holistic) -")," By default, we query AWS Cost and Usage Reports with Amazon Athena, and GCP Billing Export Table using BigQuery. This pulls usage data from all Linked Accounts in your AWS or GCP Organization. This option is selected by setting ",Object(a.b)("inlineCode",{parentName:"p"},"AWS_USE_BILLING_DATA")," (AWS) and/or ",Object(a.b)("inlineCode",{parentName:"p"},"GCP_USE_BILLING_DATA")," (GCP) to true in the server .env file. You need to also set additional environment variables as specified in ",Object(a.b)("a",{parentName:"p",href:"https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/api/.env.template"},"api/.env.template")," You can see the permissions required by this approach in ccf-athena.yaml file. This approach provides us with a more holistic estimation of your cloud energy and carbon consumption, but it is less accurate as we use a constant (rather than measure) CPU Utilization, set in ",Object(a.b)("a",{parentName:"p",href:"https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/packages/core/src/domain/FootprintEstimationConstants.ts"},"packages/core/src/domain/FootprintEstimationConstants.ts"),". This is the only approach currently supported for Microsoft Azure.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},Object(a.b)("strong",{parentName:"p"},"Using Cloud Usage APIs (Higher Accuracy) -")," This approach utilizes the AWS CloudWatch and Cost Explore APIs, and the GCP Cloud Monitoring API. We achieve this by looping through the accounts (the list is in the ",Object(a.b)("a",{parentName:"p",href:"https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/%5Bapi/.env%5D"},"api/.env")," file) and then making the API calls on each account for the regions and services set in ",Object(a.b)("a",{parentName:"p",href:"https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/packages/core/src/application/Config.ts"},"packages/core/src/application/Config.ts"),". The permissions required for this approach are in the ",Object(a.b)("a",{parentName:"p",href:"https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/ccf.yaml"},"ccf.yaml")," file. This approach is more accurate as we use the actual CPU usage in the emission estimation but is confined to the services that have been implemented so far in the application. This option is not currently supported for Microsoft Azure."))),Object(a.b)("p",null,"For a more comprehensive read on the various calculations and constants that we use for the emissions estimates, check out the ",Object(a.b)("a",{parentName:"p",href:"https://github.com/ThoughtWorks-Cleantech/cloud-carbon-footprint/blob/trunk/METHODOLOGY.md"},"Methodology page")))}l.isMDXComponent=!0},116:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var o=n(0),r=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=r.a.createContext({}),l=function(e){var t=r.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=l(e.components);return r.a.createElement(u.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),b=o,d=p["".concat(i,".").concat(b)]||p[b]||h[b]||a;return n?r.a.createElement(d,c(c({ref:t},u),{},{components:n})):r.a.createElement(d,c({ref:t},u))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=b;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var u=2;u<a;u++)i[u]=n[u];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);